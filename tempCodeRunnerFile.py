apply_midpoint_filter